<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang quản trị - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="css/admin-style.css">
</head>

<body>

    <aside class="sidebar">
        <div class="brand">
            <i class="fas fa-leaf"></i> <span>ADMIN CP</span>
        </div>

        <ul class="side-menu">
            <li><a href="index.html"><i class="fas fa-th-large"></i> Tổng quan</a></li>

            <li class="dropdown" id="prod-menu">
                <a href="javascript:void(0)" class="dropdown-btn" onclick="toggleDropdown('prod-menu')">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <i class="fas fa-box"></i> <span>QL Sản phẩm</span>
                    </div>
                    <i class="fas fa-chevron-right arrow-icon"></i>
                </a>
                <ul class="sub-menu">
                    <li><a href="products.html">◦ Danh sách sản phẩm</a></li>
                    <li><a href="categories.html">◦ Danh mục</a></li>
                </ul>
            </li>

            <li><a href="orders.html"><i class="fas fa-shopping-cart"></i> Đơn hàng <span class="badge">3</span></a>
            </li>

            <li><a href="customers.html"><i class="fas fa-users"></i> Khách hàng</a></li>

            <li><a href="settings.html"><i class="fas fa-cog"></i> Cấu hình</a></li>
        </ul>

        <div class="logout-box">
            <a href="../index.html"><i class="fas fa-sign-out-alt"></i> Về trang chủ</a>
        </div>
    </aside>

    <div class="main-content">

        <header class="top-header">
            <div class="menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </div>
            <div class="header-title">
                <h2>Tổng quan kinh doanh</h2>
                <p>Thứ 7, 10/01/2026</p>
            </div>
            <div class="header-user">
                <div class="notif-btn"><i class="fas fa-bell"></i><span class="dot"></span></div>
                <div class="user-info">
                    <img src="https://placehold.co/40x40" alt="Admin">
                    <span>Xin chào, <strong>Admin</strong></span>
                </div>
            </div>
        </header>

        <div class="content-wrapper">

            <div class="stats-grid">
                <div class="stat-card blue">
                    <div class="stat-icon"><i class="fas fa-shopping-bag"></i></div>
                    <div class="stat-info">
                        <h3>150</h3>
                        <p>Đơn hàng mới</p>
                    </div>
                </div>
                <div class="stat-card green">
                    <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
                    <div class="stat-info">
                        <h3>54.000.000đ</h3>
                        <p>Doanh thu tháng</p>
                    </div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-icon"><i class="fas fa-box-open"></i></div>
                    <div class="stat-info">
                        <h3>530</h3>
                        <p>Sản phẩm kho</p>
                    </div>
                </div>
                <div class="stat-card red">
                    <div class="stat-icon"><i class="fas fa-user-plus"></i></div>
                    <div class="stat-info">
                        <h3>24</h3>
                        <p>Khách mới</p>
                    </div>
                </div>
            </div>

            <div class="charts-row">
                <div class="chart-box" style="flex: 2;">
                    <div class="box-header">
                        <h3>Biểu đồ doanh thu</h3>
                    </div>

                    <div class="chart-scroll-wrapper">
                        <div class="chart-container-inner">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-box" style="flex: 1; overflow: hidden;">
                    <div class="box-header">
                        <h3>Đơn hàng mới</h3>
                        <a href="orders.html" style="font-size: 13px; color: var(--primary);">Xem tất cả</a>
                    </div>

                    <div class="table-container" style="box-shadow: none; padding: 0; margin: 0;">
                        <table style="min-width: 100%;">
                            <thead>
                                <tr>
                                    <th>Mã</th>
                                    <th>Khách hàng</th>
                                    <th>Tổng tiền</th>
                                    <th>TT</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="order-id">#ORD-009</span></td>
                                    <td>
                                        <strong>Nguyễn Văn A</strong><br>
                                        <span style="font-size:11px; color:#888;">10 phút trước</span>
                                    </td>
                                    <td class="price-text">137.000đ</td>
                                    <td><span class="badge" style="background:#fff7ed; color:#ea580c;">Mới</span></td>
                                </tr>
                                <tr>
                                    <td><span class="order-id">#ORD-008</span></td>
                                    <td>
                                        <strong>Trần Thị B</strong><br>
                                        <span style="font-size:11px; color:#888;">30 phút trước</span>
                                    </td>
                                    <td class="price-text">500.000đ</td>
                                    <td><span class="badge" style="background:#eff6ff; color:#2563eb;">Giao</span></td>
                                </tr>
                                <tr>
                                    <td><span class="order-id">#ORD-007</span></td>
                                    <td>
                                        <strong>Lê Văn C</strong><br>
                                        <span style="font-size:11px; color:#888;">1 giờ trước</span>
                                    </td>
                                    <td class="price-text">250.000đ</td>
                                    <td><span class="badge" style="background:#dcfce7; color:#16a34a;">Xong</span></td>
                                </tr>
                                <tr>
                                    <td><span class="order-id">#ORD-006</span></td>
                                    <td>
                                        <strong>Phạm Thị D</strong><br>
                                        <span style="font-size:11px; color:#888;">2 giờ trước</span>
                                    </td>
                                    <td class="price-text">890.000đ</td>
                                    <td><span class="badge" style="background:#dcfce7; color:#16a34a;">Xong</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <h3 style="margin: 30px 0 15px; font-size: 16px; color: #666; text-transform: uppercase; font-weight: 700;">
                <i class="fab fa-google"></i> Google Analytics
            </h3>

            <div class="charts-row">
                <div class="chart-box" style="flex: 2;">
                    <div class="box-header">
                        <h3>Lưu lượng truy cập (7 ngày qua)</h3>
                        <select style="border:1px solid #ddd; padding: 4px; border-radius:4px; font-size:12px;">
                            <option>7 ngày</option>
                            <option>30 ngày</option>
                        </select>
                    </div>
                    <div class="chart-scroll-wrapper">
                        <div class="chart-container-inner">
                            <canvas id="trafficChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-box" style="flex: 1;">
                    <div class="box-header">
                        <h3>Nguồn truy cập</h3>
                    </div>
                    <div style="position: relative; height: 200px; display:flex; justify-content:center;">
                        <canvas id="sourceChart"></canvas>
                    </div>
                    <ul class="analytics-info" style="margin-top: 15px;">
                        <li><span style="font-weight:700; color:#4285F4;">● Google Search</span> <span
                                style="font-weight:600;">60%</span></li>
                        <li><span style="font-weight:700; color:#DB4437;">● Quảng cáo (Ads)</span> <span
                                style="font-weight:600;">15%</span></li>
                        <li><span style="font-weight:700; color:#F4B400;">● Facebook/Social</span> <span
                                style="font-weight:600;">10%</span></li>
                        <li><span style="font-weight:700; color:#0F9D58;">● Trực tiếp</span> <span
                                style="font-weight:600;">15%</span></li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

    <script src="js/admin-script.js"></script>

    <script>
        // --- 1. BIỂU ĐỒ DOANH THU (Cột) ---
        const ctxRev = document.getElementById('revenueChart').getContext('2d');
        new Chart(ctxRev, {
            type: 'bar',
            data: {
                labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
                datasets: [{
                    label: 'Doanh thu (VNĐ)',
                    data: [1200000, 1900000, 3000000, 5000000, 2000000, 3000000, 4500000],
                    backgroundColor: '#0056b3',
                    borderRadius: 4,
                    barThickness: 30, // FIX LỖI: Giới hạn độ rộng cột
                    maxBarThickness: 40
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { y: { beginAtZero: true } }
            }
        });

        // --- 2. BIỂU ĐỒ TRAFFIC (Đường) ---
        const ctxTraffic = document.getElementById('trafficChart').getContext('2d');
        new Chart(ctxTraffic, {
            type: 'line',
            data: {
                labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
                datasets: [
                    {
                        label: 'Lượt xem trang (Pageviews)',
                        data: [150, 230, 180, 320, 290, 400, 380],
                        borderColor: '#4285F4', backgroundColor: 'rgba(66, 133, 244, 0.1)', fill: true, tension: 0.4
                    },
                    {
                        label: 'Người dùng (Users)',
                        data: [80, 120, 100, 200, 150, 250, 210],
                        borderColor: '#34a853', borderDash: [5, 5], tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } }
            }
        });

        // --- 3. BIỂU ĐỒ NGUỒN KHÁCH (Tròn) ---
        const ctxSource = document.getElementById('sourceChart').getContext('2d');
        new Chart(ctxSource, {
            type: 'doughnut',
            data: {
                labels: ['Google Search', 'Quảng cáo', 'Social', 'Trực tiếp'],
                datasets: [{
                    data: [60, 15, 10, 15],
                    backgroundColor: ['#4285F4', '#DB4437', '#F4B400', '#0F9D58'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false } }
            }
        });
    </script>
</body>

</html>